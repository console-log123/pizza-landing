<div class="fixed top-0 right-0 w-full sm:w-96 h-full bg-white shadow-2xl z-50 transition-transform duration-300 transform"
    [class.translate-x-full]="!cartService.isCartOpen()" [class.translate-x-0]="cartService.isCartOpen()">
    <!-- Header -->
    <div class="px-6 py-4 border-b flex justify-between items-center bg-red-600 text-white shadow-md">
        <h3 class="text-2xl font-staatliches tracking-wide">ðŸ›’ Tu Carrito</h3>
        <button (click)="cartService.toggleCart()" class="text-white hover:text-yellow-200 text-xl font-bold">
            âœ•
        </button>
    </div>

    <!-- Contenido del carrito -->
    <div class="p-6 overflow-y-auto h-[calc(100%-14rem)] bg-gradient-to-b from-white to-red-50">
        <div *ngIf="cartService.items().length > 0; else emptyCart">
            <div *ngFor="let item of cartService.items()"
                class="flex justify-between items-center mb-5 p-3 bg-white rounded-lg shadow hover:shadow-md transition">
                <div class="flex items-center gap-4">
                    <img [src]="item.image" class="w-16 h-16 rounded object-cover border-2 border-red-300 shadow-sm" />
                    <div>
                        <h4 class="font-staatliches text-lg text-gray-800">{{ item.name }}</h4>
                        <p class="text-red-600 font-bold">{{ item.price | currency:'CLP':'symbol-narrow' }}</p>
                    </div>
                </div>
                <div class="flex items-center">
                    <button (click)="decrementQuantity(item)"
                        class="bg-red-100 text-red-600 px-2 py-1 rounded-l hover:bg-red-200">-</button>
                    <span class="px-3 font-semibold text-gray-700">{{ item.quantity }}</span>
                    <button (click)="incrementQuantity(item)"
                        class="bg-red-100 text-red-600 px-2 py-1 rounded-r hover:bg-red-200">+</button>
                </div>
            </div>
        </div>
        <ng-template #emptyCart>
            <div class="text-center text-gray-500 mt-10">
                <p class="text-xl">ðŸ§º Tu carrito estÃ¡ vacÃ­o.</p>
            </div>
        </ng-template>
    </div>

    <!-- Total y acciones -->
    <div class="p-6 border-t bg-white shadow-inner">
        <div class="flex justify-between items-center mb-5 text-lg font-semibold">
            <span class="text-gray-800">Total:</span>
            <span class="text-red-600">{{ cartService.getTotal() | currency:'CLP':'symbol-narrow' }}</span>
        </div>
        <div class="flex gap-3">
            <button
                class="flex-1 bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700 transition shadow"
                routerLink="/checkout" (click)="cartService.toggleCart()">
                ðŸ§¾ Pagar
            </button>
            <button
                class="flex-1 border border-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-100 transition shadow-sm"
                (click)="cartService.toggleCart()">
                âž• Seguir Comprando
            </button>
        </div>
    </div>
</div>